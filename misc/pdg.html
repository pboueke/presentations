<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=1024, user-scalable=no">

  <title>Framework para Serviços de Aprendizado de Máquina</title>
  <meta name="description" content="Framework para Serviços de Aprendizado de Máquina">
  <meta name="keywords" content="machine learning, pboueke">
  <meta name="author" content="Pedro Boueke">

  <!-- Required stylesheet -->
  <link rel="stylesheet" media="screen" href="../deck/core/deck.core.css">
  <link rel="stylesheet" media="screen" href="css/pdg.css">

  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Ultra|Roboto+Mono" rel="stylesheet">

  <!-- Extension CSS files go here. Remove or add as needed. -->
  <link rel="stylesheet" media="screen" href="../deck/extensions/goto/deck.goto.css">
  <link rel="stylesheet" media="screen" href="../deck/extensions/menu/deck.menu.css">
  <link rel="stylesheet" media="screen" href="../deck/extensions/navigation/deck.navigation.css">
  <link rel="stylesheet" media="screen" href="../deck/extensions/scale/deck.scale.css">

  <!-- Transition theme. More available in /themes/transition/ or create your own. -->
  <link rel="stylesheet" media="screen" href="../deck/themes/transition/fade.css">

  <!-- Basic black and white print styles -->
  <link rel="stylesheet" media="print" href="../deck/core/print.css">

  <!-- Required Modernizr file -->
  <script src="../deck/modernizr.custom.js"></script>
</head>
<body>
  <div class="deck-container frame output">
      <div class="deck-header">Framework para Serviços de Aprendizado de Máquina</div>

    <section class="slide">
        <div class="main-title">Framework para Serviços de Aprendizado de Máquina</div>
        <br><br>
        <div class="author">Pedro Hollanda Boueke</div>
        <br><br><br>
        <div style="margin-left:50%; margin-right:10%; font-size:20px; text-align: justify">
            <div >
                Projeto de Graduaçãao apresentado ao Curso
                de Engenharia de Computação e Informação
                da Escola Politécnica, Universidade Federal
                do Rio de Janeiro, como parte dos requisitos
                necessários à obtenção do título de Engenheiro.                    
            </div>
            <br>
            <div>
                Orientador: <span style="font-weight: 700">Flávio Luis de Mello</span>
            </div>
        </div>
        <br><br><br><br><br>
        <div style="font-size:20px;">
            Rio de Janeiro <br> Março de 2019
        </div>
    </section>

    <section class="slide">
        <div class="page">1</div>
        <div class="title">Tema</div>
        <br><br>
        <p class="large">
            Uma plataforma para serviços<br> de Aprendizado de Máquina.
        </p>
        <br>
        <!--<p>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            O trabalho se destina a atender as demandas de todas as esferas de 
            usuários de modelos de aprendizado de máquina, com algumas restrições.
            São requisitos para uso da plataforma: uso de sistemas operacionais
            UNIX; uso da linguagem Python3; uso de bancos de dados compatíveis 
            com a linguagem SQL.
        </p>-->
    </section>

    <section class="slide">
        <div class="page">2</div>
        <div class="title">Justificativa</div>
        <br><br>
        <ul class="large" style="list-style-type: circle">
            <li>
                Alta demanda 
            </li>
            <li>
                Menor foco acadêmico
            </li>
        </ul>
    </section>

    <section class="slide">
        <div class="page">3</div>
        <div class="title">Objetivos</div>
        <br><br>
        <ul style="list-style-type: decimal">
            <li>
                Aplicação web:
                <ul style="list-style-type: lower-alpha">
                    <li>
                        escalonamento da execução de modelos
                    </li>
                    <li>
                        visualização dos resultados e eventos do sistema
                    </li>
                    <li>
                        execução de modelos em tempo real
                    </li>
                    <li>
                        coleta e persistência de dados
                    </li>
                    <li>
                        configurável
                    </li>
                </ul>
            </li>
            <li>
                Base de dados relacional para armazenamento de eventos
            </li>
            <li>
                Programa para execução de modelos de aprendizado de máquina
            </li>
        </ul>
    </section>

    <section class="slide">
        <div class="page">4</div>
        <div class="title">Sistemas de Aprendizado de Máquina em Ambiente de Produção</div>
        <br><br>

        <div style="display: flex; flex-direction: column;">
            <img height="200px" src="img/sagemaker.png"/>
            <img height="200px" src="img/azuremls.jpg">
        </div>
    </section>

    <section class="slide">
        <div class="page">5</div>
        <div class="title">Agendadores de Tarefas</div>
        <br><br>
        <div style="display: flex; flex-direction: column;">
            <br>
            <img height="200px" src="img/slurm.png" style="margin-right: 50px;"/>
            <img height="240px" src="img/crontab.png" style="margin-left: 50px;">
        </div>
    </section>

    <section class="slide">
        <div class="page">6</div>
        <div class="title">Desenvolvimento com Django e AWS</div>
        <br><br>
        <div style="display: flex; flex-direction: column;">
            <img height="170px" src="img/django.png" style="margin-top: 50px;"/>
            <img height="230px" src="img/aws.png" style="">
        </div>
    </section>

    <section class="slide">
        <div class="page">7</div>
        <div class="title">Arquitetura</div>
        <br><br>
        <img height="550px" src="img/framework.png" />
    </section>

    <section class="slide">
        <div class="page">8</div>
        <div class="title">Configuração</div>
        <br><br>
        <ul class="large" style="list-style-type: circle">
                <li>
                    settings.py 
                </li>
                <li>
                    config.yaml
                </li>
            </ul>
    </section>

    <section class="slide">
        <div class="page">9</div>
        <div class="title">View</div>
        <br><br>
        <img height="400px" src="img/framework.png" />
        <br>
        <img height="150px" src="img/perms.png" />
    </section>

    <section class="slide">
        <div class="page">10</div>
        <div class="title">Datalake</div>
        <br><br>
        <img height="400px" src="img/framework.png" />
        <br>
        <p>
            Gerência a conexão com o Datalake
        </p>
        <br>
    </section>

    <section class="slide">
        <div class="page">11</div>
        <div class="title">Showroom</div>
        <br><br>
        <img height="550px" src="img/showroom.png" />
    </section>

    <section class="slide">
        <div class="page">12</div>
        <div class="title">Daemon</div>
        <br><br>
        <img height="550px" src="img/sequence_daemon.png" />
    </section>

    <section class="slide">
        <div class="page">13</div>
        <div class="title">Disparo</div>
        <br><br>
        <img height="550px" src="img/dispatch.png" />
    </section>

    <section class="slide">
        <div class="page">14</div>
        <div class="title">Monitor</div>
        <br><br>
        <img height="550px" src="img/monitor.png" />
    </section>

    <section class="slide">
        <div class="page">15</div>
        <div class="title">Urls</div>
        <br><br>
        <img height="400px" src="img/routes.png" />
    </section>

    <section class="slide">
        <div class="page">16</div>
        <div class="title">Implantação</div>
        <br><br>
        <ul class="large" style="list-style-type: circle">
                <li>
                    Código fonte no Github
                </li>
                <li>
                    Servidor na AWS
                </li>
                <li>
                    Banco hospedado na mesma máquina
                </li>
            </ul>
    </section>

    <section class="slide">
        <div class="page">17</div>
        <div class="title">Configuração do ambiente</div>
        <br><br>
        <div style="display:flex;">
            <img height="500px" src="img/readme.png"/>
            <p style="max-width:400px;padding:50px;">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                README.md
            </p>
        </div>
    </section>

    <section class="slide">
        <div class="page">18</div>
        <div class="title">Inicialização da aplicação</div>
        <br><br><br><br><br><br><br><br><br><br>
        <div class="code">
                $ python manage.py runserver 0.0.0.0:&lt;porta&gt;
        </div>
    </section>

    <section class="slide">
        <div class="page">19</div>
        <div class="title">Conclusão</div>
        <br><br>
        <p class="large">
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Com todos os pontos objetivados alcançados, tem-se o sucesso da proposta e da implementação
            da proposta.
        </p>
    </section>

    <section class="slide">
        <div class="page">20</div>
        <div class="title">Trabalhos Futuros</div>
        <br><br>
        <ul CLASS="large" style="list-style-type: decimal">
            <li>
                View encarregada de gerenciar as configurações
            </li>
            <li>
                Permitir vários modelos e cargas de trabalho
            </li>
            <li>
                Web API para a execução de modelos sob demanda
            </li>
        </ul>
    </section>

    <!--
        0. Boa tarde a todos, meu nome é Pedro Hollanda Boueke, aluno orientado pelo professor 
        Flavio Luis de Mello. Hoje vou apresentar o meu projeto de graduação, um Framework 
        para serviços de aprendizado de máquina

        1. Como o nome sugere, o tema do trabalho se trata de uma plataforma para gerencia e execucao
        de servicos de aprendizado de maquina, desde a coleta dos dados a serem processados até a execucao
        dos modelos de aprendzado de maquina e persistencia e visualizacao dos resultados

        2. O projeto se justifica pela alta demanda por sistemas de aprendizado de maquina no momento. Enquanto
        que houve um grande aumento de publicacoes e pesquisa sendo feita na área de aprendizado de maquina,
        nao houve aumento, na mesma medida, do surgimento de sistemas para implantacao de modelos e algoritmos
        de aprendizado de maquina em ambientes de producao, principalmente por parte da academia
        
        3. Objetiva-se a construcao de uma aplicacao web que permita o escalonamento da execucao 
        de modelos de aprendizado de maquina, a visualizacao dos resultados, a execucao de modelos em tempo real,
        a coleta e persistencia dos dados de maneira configurável e adaptável a ambientes diversos. 
        O desenvolvimento de uma base de dados relacional para armazenamento dos resultados e eventos do sistema
        O desenvolvimento de um programa para execucao de modelos de aprendizado de maquina

        4. As principais tecnologias prontas para implantacao de modelos de aprendizado de maquina em producao
        são serviços gerenciados, como o amazon sagemaker e o azure machine learning studio. Enquanto que 
        existem solucoes open source, em sua maioria requerem grande esforco para serem utilizadas

        5. Para o processamento escalonado de tarefas, uma solução é o uso de agendadores de tarefas, job schedulers,
        ferramentas que permitem a execucao agendada de programas.
        Uma dessas ferramentas é o slurm, uma das pricipais ferramentas de código aberta utilizada em sistemas unix-like.
        O slurm é um workload manager caracterizado por tres funcoes principais: a alocacao de recursos a usuários, 
        prover um framework para gerenciar tarefas, arbitrar a contencao de recursos gerenciando filas de trabalhos pendentes
        Outra ferramenta é o crontab. O
        nome  ́e uma abrevia ̧c ̃ao de cron table, pois se refere ao arquivo cron file utilizado
        internamente para agendamento e execu ̧c ̃ao de tarefas. Esse programa consiste de
        um arquivo no sistema operacional que periodicamente  ́e lido pelo cron daemon,
        fazendo uso de express ̃oes CRON, e suas linhas s ̃ao interpretadas como entradas de
        uma tabela contendo em uma coluna a express ̃ao que define sua agenda de execu ̧c ̃ao e
        em outra coluna o comando a ser executado como um programa de linha de comando.
        Seu diferencial est ́a no fato de ser extremamente simples e possuir suporte para
        manipula ̧c ̃ao por meio de diversas linguagens de programa ̧c ̃ao, incluindo Python 3,
        a linguagem escolhida para o desenvolvimento do sistema aqui detalhado.

        6. O Django  ́e um framework de desenvolvimento de aplica ̧c ̃oes e servi ̧cos web
        dispon ́ıvel nas linguagens de programa ̧c ̃ao Python 2 e 3, gratuito e de c ́odigo aberto.
        Sua estrutura interna  ́e baseada no paradigma MTV, particularmente caracterizada
        por uma forte e nativa integra ̧c ̃ao com bancos de dados a partir de uma interface
        pr ́opria. Um ponto interessante é que ele prove toda uma camadsa de autenticacao e
        administracao própria, evitando que ela precise ser desenvolvida. 
        A Amazon Web Services, ou AWS,  ́e a maior provedora de infraestrutura em
        nuvem do mercado. A empresa provˆe servi ̧cos para websites, aplica ̧c ̃oes cliente
        servidor, banco de dados, an ́alise de dados, redes, dispositivos m ́oveis, ferramentas
        de gerenciamento, armazenamento de dados, aluguel de servidores entre outros [6].
        Seus servi ̧cos podem ser acessados em seu portal web e por meio de suas APIs e
        SDKs.

        7. Aplicacao django com tres interfaces. Explicar diagrama.

        8. Dois arquivos de configuracao, o settings.py, referente as configuracoes do django, 
        e o config.yaml, com as configuracoes do framework

        9. Componente que atua como controlador das requisicoes, sendo responsavel por respnser 
        todos os html e requisicoes assincronas requisitadas. Essa componente também é responsável 
        por gerenciar as permissoes de acesso dos usuários, restringindo acesso a certas views, dependendo
        do grupo ao qual o ususario pertence

        10. É responsável por gerenciar as conexões com o datalake. Todas as conexoes passam por ele.

        11. A view showrrom tem o propósito de demonstrar o modelo carregado na aplicacao permitindo que 
        inferencias sejam realizadas em tempo real sobre uma série de casos, como visto na figura. A componente
        contem dois metodos appenas, um para a inferencia de todos os casos e outro para a inferencia de apenas um deles

        12. Essa é a componente responsável por executar, de maneira escalonada, as inferencias
        que a plataforma se propoe a fazer. Sempre  que executada, seguirá os passos do diagrama de sequencia aqui mostrado.
        Ela basicamente coleta os dados do datalake, faz a inferencia sobre cada um deles e persite os resultados no datalake,
        armazenando todos os eventos e resultados também no banco da aplicacao

        13. Essa view é responsável por opermitir a visualizacao dos disparos e resultados associados a cada um deles.
        Nela, há um filtro de intervalo temporal que permite a visualizacao de todos os disparos dentro de um intervalo de tempo

        14. Essa view é responsável pelo monitoramento de todos os servicos associados de alguma maneira a aplicacao. Ela monitora o
        estado de um servidor por meio de uma conexao socket, o estado do datalake por meio de uma consulta simples ao banco, 
        o estado do banco da aplicacao por meio do estado da conexao com o banco gerenciada pelo DDjango e o estado do crontab, verificando
        se o comando de execucao do daemon esta ativo, a proxima e ultima data de exeecucao e a expressao CRON carregada na aplicacao.

        15. A componente urls.py  ́e respons ́avel por descrever as rotas da aplica ̧c ̃ao. Nela, os
        caminhos que levam `as views e `as chamadas ass ́ıncronas est ̃ao detalhadas em uma
        lista, fazendo a associa ̧c ̃ao direta entre as fun ̧c ̃oes da componete views.py e as rotas
        usadas pelo usu ́ario e pela interface da aplica ̧c ̃ao.

        16. Para a implantacao do sistema, é preciso obter o codigo fonte no github.
        Foi obtido um servidor na aws, onde foram instalados o framework
        e o banco da aplicacao. Os passos para implantacao, configuracao e inicializacao sao vistos a seguir

        17. Com o codigo fonte em maos, é preciso seguir as instrucoes do readme do projeto, que contem detalhadamente
        todos os passos de configuracao. Eles sao:
        * instalar o pytrhon 3 na maquina da aplicacao
        * criar e inicializar um ambiente virtual para o python
        * carregar dependencias python
        * instalar o banco MySQL em local acessivel a aplicacao
        * instalar o cliente MySQL na maquina da aplicacao 
        * configurar config.yaml adequadamente
        * se conectar ao banco e criar usuario do django
        * inicializar o django 
        * criar usuarios e grupos dos usuarios
        * instalar driver ODBC compativel ao datalake

        18. basta executar esse comando

        19. Sucesso, todos os objetivos foram alcançados. O escalonamento
        de execu ̧c ̃oes de modelos de aprendizado de m ́aquina  ́e poss ́ıvel por meio do uso do
        crontab, gerenciado pela aplica ̧c ̃ao web. A visualiza ̧c ̃ao dos resultados e eventos  ́e
        poss ́ıvel por meio da mesma aplica ̧c ̃ao, que, por sua vez,  ́e configur ́avel de diversas
        formas, como visto anteriormente.

        20.
            1. Nova view para configuracoes
            2. varios modelos de uma vez
            3. web api


    -->

    <div class="piece scanlines noclick"></div>
    <div class="piece glow noclick"></div>

    <!-- End slides. -->

    <!-- Begin extension snippets. Add or remove as needed. -->

    <!-- deck.navigation snippet -->
    <div aria-role="navigation">
      <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
      <a href="#" class="deck-next-link" title="Next">&#8594;</a>
    </div>

    <!-- deck.goto snippet -->
    <form action="." method="get" class="goto-form">
      <label for="goto-slide">Go to slide:</label>
      <input type="text" name="slidenum" id="goto-slide" list="goto-datalist">
      <datalist id="goto-datalist"></datalist>
      <input type="submit" value="Go">
    </form>

    <div class="deck-footer">
        <span>Março de 2019</span>
        <span>UFRJ</span>
    </div>

  </div>

  <!--<div class="pres-author"> Presentation by <a href="https://pboueke.github.io"> Pedro Boueke</a>, September 2017  </div>-->

<!-- Required JS files. -->
<script src="../deck/jquery.min.js"></script>
<script src="../deck/core/deck.core.js"></script>

<!-- Extension JS files. Add or remove as needed. -->
<script src="../deck/extensions/menu/deck.menu.js"></script>
<script src="../deck/extensions/goto/deck.goto.js"></script>
<script src="../deck/extensions/navigation/deck.navigation.js"></script>
<script src="../deck/extensions/scale/deck.scale.js"></script>

<!-- Initialize the deck. You can put this in an external file if desired. -->
<script>

    // deck js
    $(function() {
        $.deck('.slide');
    });

    // google analytics
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-63582989-1', 'auto');
        ga('send', 'pageview');
</script>
</body>
</html>
